(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{610:function(e,r,t){"use strict";t.r(r);var a=t(2),s=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[e._v("axios源码阅读分为三个部分。")]),e._v(" "),t("ol",[t("li",[e._v("文件目录篇")]),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/views/2020/4/axios_used.html"}},[e._v("应用篇")])],1),e._v(" "),t("li",[e._v("手写一个axios")])])]),e._v(" "),t("h2",{attrs:{id:"入口文件之axios-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#入口文件之axios-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/axios.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("入口文件之axios.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("axios的入口文件。主要功能：")]),e._v(" "),t("ol",[t("li",[e._v("createInstance创建axios实例。")]),e._v(" "),t("li",[e._v("axios.create方法允许用户创建多个axios实例同时允许继承。")]),e._v(" "),t("li",[e._v("axios.Cancel、axios.CancelToken、axios.isCancel用于控制取消网络请求")]),e._v(" "),t("li",[e._v("axios.all 用于发送多个网络请求，实际使用了Promise.all")]),e._v(" "),t("li",[e._v("axios.spread 将多个参数合并成数组执行，可使用延展语法代替，配合axios.all使用")])]),e._v(" "),t("h2",{attrs:{id:"axios默认配置文件defaults-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#axios默认配置文件defaults-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/defaults.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("axios默认配置文件defaults.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("此文件中主要需注意getDefaultAdapter方法，该方法主要是设置axios的网络请求模块，在浏览器环境下使用XMLHttpRequest模块，node模式下使用http模块。")]),e._v(" "),t("h2",{attrs:{id:"实用工具集utils-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实用工具集utils-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/utils.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("实用工具集utils.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("主要封装了一些常用的工具函数。")]),e._v(" "),t("h2",{attrs:{id:"adapters目录下http-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adapters目录下http-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/adapters/http.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("adapters目录下http.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("node模式下使用http网络请求模块。使用Promise进行了一层封装。主要功能：")]),e._v(" "),t("ol",[t("li",[e._v("设置User-Agent（可选）")]),e._v(" "),t("li",[e._v("处理请求数据")]),e._v(" "),t("li",[e._v("HTTP基本身份验证（可选）")]),e._v(" "),t("li",[e._v("解析url并处理成绝对路径")]),e._v(" "),t("li",[e._v("设置代理（可选）")]),e._v(" "),t("li",[e._v("创建请求对象")]),e._v(" "),t("li",[e._v("监听请求错误")]),e._v(" "),t("li",[e._v("处理请求超时（可选）")]),e._v(" "),t("li",[e._v("监听请求取消（可选）")])]),e._v(" "),t("h2",{attrs:{id:"adapters目录下xhr-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adapters目录下xhr-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/adapters/xhr.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("adapters目录下xhr.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("浏览器模式下使用XMLHttpRequest。同样的也使用了Promise进行封装。主要功能：")]),e._v(" "),t("ol",[t("li",[e._v("HTTP基本身份验证")]),e._v(" "),t("li",[e._v("解析url并处理成绝对路径")]),e._v(" "),t("li",[e._v("监听网络请求是否就绪")]),e._v(" "),t("li",[e._v("处理浏览器请求取消的情况（与手动取消相反）")]),e._v(" "),t("li",[e._v("处理底层网络错误")]),e._v(" "),t("li",[e._v("添加xsrf标头")]),e._v(" "),t("li",[e._v("添加请求头")]),e._v(" "),t("li",[e._v("添加withCredentials进行请求（如果需要）")]),e._v(" "),t("li",[e._v("设置响应类型（可选）")]),e._v(" "),t("li",[e._v("监听文件下载进度（可选，下载可用）")]),e._v(" "),t("li",[e._v("监听文件上传进度（可选，文件上传可用）")]),e._v(" "),t("li",[e._v("监听请求取消（可选）")])]),e._v(" "),t("h2",{attrs:{id:"cancel目录下cancel-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cancel目录下cancel-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/cancel/Cancel.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("cancel目录下Cancel.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("一个Cancel类，用于取消请求时使用，包含message字段。主要功能：")]),e._v(" "),t("ol",[t("li",[e._v("重写了toString方法")]),e._v(" "),t("li",[e._v("函数原型上添加了__CANCEL__属性，默认为true")])]),e._v(" "),t("h2",{attrs:{id:"cancel目录下canceltoken-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cancel目录下canceltoken-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/cancel/CancelToken.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("cancel目录下CancelToken.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("一个CancelToken类，用于取消请求时使用。主要功能：")]),e._v(" "),t("ol",[t("li",[e._v("包装一个执行器生成token")]),e._v(" "),t("li",[e._v("包含throwIfRequested方法，用于处理请求取消的情况。")])]),e._v(" "),t("h2",{attrs:{id:"cancel目录下iscancel-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cancel目录下iscancel-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/cancel/isCancel.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("cancel目录下isCancel.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("判断请求是否取消。")]),e._v(" "),t("h2",{attrs:{id:"core目录下axios-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下axios-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/Axios.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下Axios.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("声明一个Axios类，同时通过构造方法设置axios配置和初始化请求拦截器和响应拦截器。\n包含request、getUri、get、delete、head、options、post、put和patch方法。")]),e._v(" "),t("h2",{attrs:{id:"core目录下buildfullpath-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下buildfullpath-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/buildFullPath.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下buildFullPath.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("将相对路径组合成绝对路径。")]),e._v(" "),t("h2",{attrs:{id:"core目录下createerror-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下createerror-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/createError.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下createError.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("使用指定的消息，配置，错误代码，请求和响应创建错误信息。")]),e._v(" "),t("h2",{attrs:{id:"core目录下dispatchrequest-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下dispatchrequest-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/dispatchRequest.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下dispatchRequest.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("使用配置的适配器，即网络请求模块进行网络请求。在进行网络请求之前，先判断是否已经取消了网路请求，如果没有，就进行转换请求数据，合并请求头等操作；然后再进行网络请求；最后转换响应数据。")]),e._v(" "),t("h2",{attrs:{id:"core目录下enhanceerror-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下enhanceerror-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/enhanceError.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下enhanceError.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("使用指定的消息，配置，错误代码，请求和响应格式化错误信息。")]),e._v(" "),t("h2",{attrs:{id:"core目录下interceptormanager-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下interceptormanager-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/InterceptorManager.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下InterceptorManager.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("拦截器管理类，包含三个方法：分别是use方法——添加拦截器，eject方法——移除拦截器，forEach方法——遍历并调用拦截器。")]),e._v(" "),t("h2",{attrs:{id:"core目录下mergeconfig-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下mergeconfig-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/mergeConfig.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下mergeConfig.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("用于axios配置文件合并。")]),e._v(" "),t("h2",{attrs:{id:"core目录下settle-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下settle-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/settle.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下settle.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("根据响应结果执行Promise.resolve或者Promise.reject。")]),e._v(" "),t("h2",{attrs:{id:"core目录下transformdata-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core目录下transformdata-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/core/transformData.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("core目录下transformData.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("转换请求或响应数据。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下bind-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下bind-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/bind.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下bind.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("实现函数绑定执行上下文，即this对象。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下buildurl-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下buildurl-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/buildURL.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下buildURL.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("序列化参数，并拼接到URL。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下combineurls-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下combineurls-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/combineURLs.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下combineURLs.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("通过baseURL和相对URL组合形成一个新的URL。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下cookies-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下cookies-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/cookies.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下cookies.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("cookies模块，只有在浏览器环境存在，实现read、write、remove三个函数；其他环境不需要，实现read、write、remove三个空函数，防止调用报错。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下isabsoluteurl-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下isabsoluteurl-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/isAbsoluteURL.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下isAbsoluteURL.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("判断是否为绝对路径。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下isurlsameorigin-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下isurlsameorigin-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/isURLSameOrigin.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下isURLSameOrigin.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("判断URL是否同源，非标准浏览器环境 (web workers, react-native) 不支持支持，直接返回true。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下normalizeheadername-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下normalizeheadername-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/normalizeHeaderName.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下normalizeHeaderName.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("标准化请求头，删除不需要的请求头字段。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下parseheaders-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下parseheaders-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/parseHeaders.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下parseHeaders.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("转化成一个标准的请求头对象。")]),e._v(" "),t("h2",{attrs:{id:"helpers目录下spread-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers目录下spread-js"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://gitee.com/Flee.Lethe.net/axios_learning/blob/master/lib/helpers/spread.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("helpers目录下spread.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("将多个参数转化为一个数组执行。")])])}),[],!1,null,null,null);r.default=s.exports}}]);